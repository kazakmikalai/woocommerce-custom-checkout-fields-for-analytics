# Инструкции по развертыванию

## Подготовка к продакшн

### 1. Проверка совместимости

Перед развертыванием убедитесь, что:

- WordPress версии 5.0+
- WooCommerce версии 6.0+
- PHP версии 7.4+
- Включено логирование ошибок для отладки

### 2. Тестирование

Обязательно протестируйте плагин на staging-окружении:

- [ ] Кастомные поля отображаются в checkout
- [ ] Поля сохраняются при создании заказа
- [ ] Данные отображаются в Analytics
- [ ] CSV экспорт работает корректно
- [ ] Нет конфликтов с другими плагинами

### 3. Резервное копирование

Перед установкой создайте резервные копии:

```bash
# База данных
wp db export backup_$(date +%Y%m%d_%H%M%S).sql

# Файлы WordPress
tar -czf wordpress_backup_$(date +%Y%m%d_%H%M%S).tar.gz /path/to/wordpress
```

## Установка

### Способ 1: Через WordPress Admin

1. Загрузите ZIP архив плагина
2. Перейдите в **Плагины → Добавить новый**
3. Нажмите **Загрузить плагин**
4. Выберите ZIP файл и нажмите **Установить**
5. Активируйте плагин

### Способ 2: Ручная установка

1. Скопируйте файлы плагина в `/wp-content/plugins/bygi-custom-checkout-fields/`
2. Убедитесь в правильности прав доступа (755 для папок, 644 для файлов)
3. Активируйте плагин через админ-панель

### Способ 3: Composer (для разработчиков)

```bash
composer require bygi/woocommerce-custom-checkout-fields
```

## Настройка

### 1. Проверка активации

После активации проверьте:

- В форме оформления заказа появились поля "ФИО" и "Номер комнаты"
- Поля отмечены как обязательные
- В админ-панели WooCommerce → Заказы видны новые колонки

### 2. Настройка логирования

Для отладки включите логирование в `wp-config.php`:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

Логи будут записываться в `wp-content/debug.log`.

### 3. Проверка Analytics

1. Перейдите в **WooCommerce → Analytics → Заказы**
2. Убедитесь, что видны колонки "ФИО" и "Номер комнаты"
3. Проверьте, что данные загружаются корректно

## Мониторинг

### 1. Проверка логов

Регулярно проверяйте логи на наличие ошибок:

```bash
tail -f wp-content/debug.log | grep "BYGI DEBUG"
```

### 2. Проверка производительности

Мониторьте:
- Время загрузки страниц checkout
- Производительность Analytics
- Использование памяти

### 3. Проверка совместимости

После обновлений WordPress/WooCommerce:
- Проверьте работоспособность плагина
- Убедитесь в отсутствии ошибок
- Протестируйте основные функции

## Обновление

### 1. Подготовка

Перед обновлением:
- Создайте резервную копию
- Протестируйте на staging
- Проверьте changelog

### 2. Процесс обновления

1. Деактивируйте плагин
2. Замените файлы новой версией
3. Активируйте плагин
4. Проверьте работоспособность

### 3. Откат

При проблемах:
1. Деактивируйте плагин
2. Восстановите предыдущую версию
3. Активируйте плагин
4. Проверьте работоспособность

## Безопасность

### 1. Права доступа

Убедитесь в правильности прав:
- Папки: 755
- Файлы: 644
- wp-config.php: 600

### 2. Проверка целостности

Регулярно проверяйте:
- Целостность файлов плагина
- Отсутствие подозрительного кода
- Актуальность версий

### 3. Мониторинг безопасности

- Подпишитесь на уведомления о безопасности
- Регулярно обновляйте WordPress и WooCommerce
- Используйте плагины безопасности

## Поддержка

При возникновении проблем:

1. Проверьте логи ошибок
2. Изучите документацию
3. Создайте issue в GitHub
4. Обратитесь к сообществу

---

**Важно**: Всегда тестируйте изменения на staging-окружении перед применением на продакшн! 