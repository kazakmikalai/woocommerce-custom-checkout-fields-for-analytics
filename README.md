# Woocommerce Custom Checkout Fields for Analytics

WordPress плагин для WooCommerce, который добавляет кастомные поля в процесс оформления заказа и интегрирует их с аналитикой WooCommerce.

## Описание

Плагин добавляет два обязательных поля в форму оформления заказа WooCommerce:
- **ФИО** - полное имя клиента
- **Номер комнаты** - номер комнаты для доставки

Эти поля автоматически отображаются в:
- Аналитике WooCommerce (отчеты заказов)
- CSV экспорте заказов
- Административной панели

## Возможности

✅ **Кастомные поля в Checkout**
- ФИО (обязательное поле)
- Номер комнаты (обязательное поле)

✅ **Интеграция с Analytics**
- Отображение кастомных полей в отчетах заказов
- Поддержка React-based Analytics WooCommerce
- Автоматическое добавление колонок в таблицы

✅ **CSV Экспорт**
- Включение кастомных полей в экспорт заказов
- Поддержка различных форматов данных заказов

✅ **Совместимость**
- WooCommerce 6.0+
- WordPress 5.0+
- Поддержка HPOS (High-Performance Order Storage)
- Совместимость с классической системой заказов

## Установка

1. Загрузите файлы плагина в папку `/wp-content/plugins/bygi-custom-checkout-fields/`
2. Активируйте плагин через меню 'Плагины' в WordPress
3. Плагин автоматически добавит поля в форму оформления заказа

## Использование

### Для клиентов
После активации плагина в форме оформления заказа WooCommerce автоматически появятся два новых поля:
- Поле "ФИО" для ввода полного имени
- Поле "Номер комнаты" для указания номера комнаты

### Для администраторов
Кастомные поля будут доступны в:
- **Analytics → Заказы**: Новые колонки "ФИО" и "Номер комнаты"
- **Заказы → Экспорт**: CSV файлы будут содержать кастомные поля
- **Заказы → Просмотр**: Мета-данные заказа будут включать кастомные поля

## Структура файлов

```
bygi-custom-checkout-fields/
├── bygi-custom-checkout-fields.php  # Основной файл плагина
├── admin.js                         # JavaScript для Analytics
├── README.md                        # Документация
└── .gitignore                       # Git ignore файл
```

## Технические детали

### Хуки WooCommerce
Плагин использует следующие хуки для интеграции с Analytics:
- `woocommerce_analytics_clauses_select_*`
- `woocommerce_analytics_clauses_join_*`
- `woocommerce_filter_orders_export_columns`
- `woocommerce_report_orders_prepare_export_item`

### JavaScript интеграция
- Использует `wp.hooks` для интеграции с React Analytics
- Автоматически добавляет кастомные колонки в таблицы отчетов
- Совместим с современным интерфейсом WooCommerce Admin

### Мета-данные заказов
Кастомные поля сохраняются как мета-данные заказа с ключами:
- `_wc_other/custom/checkout_full_name`
- `_wc_other/custom/checkout_room_number`

## Требования

- WordPress 5.0 или выше
- WooCommerce 6.0 или выше
- PHP 7.4 или выше

## Поддержка

Плагин включает подробное логирование для отладки. Логи записываются в `wp-content/debug.log` при включенном логировании WordPress.

## Версии

- **2.0** - Текущая версия с поддержкой HPOS и улучшенной интеграцией
- **1.0** - Базовая версия с кастомными полями

## Автор

**Mikalai Kazak** - разработчик плагина

## Лицензия

Плагин распространяется под лицензией GPL v2 или более поздней версии.

---

**Примечание**: Плагин автоматически адаптируется к настройкам вашего WooCommerce и не требует дополнительной конфигурации после активации. 